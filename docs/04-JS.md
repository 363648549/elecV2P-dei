## 运行模式 - [vm](https://nodejs.org/api/vm.html)

``` JS
const newScript = new vm.Script("var body='this is a js code'")
newScript.runInNewContext(context)n
```

## context - JS 运行环境

### 几个内置函数

- $axios
- $store
- $feed
- $exec

### $axios(req)

axios 网络请求，具体参考：[axios](https://github.com/axios/axios)

### $store

常量/cookie 存储

``` JS example
$store.put(value, key)
$store.get(key)
```

### $feed.push(tile, description, url)

添加一个 feed item

``` JS example
$feed.push('elecV2P notification', '这是一条来自 elecV2P 的通知', 'https://github.com/elecV2/elecV2P')
```

*url 可省略*

### $exec(command, cb) - async 异步函数

执行 exec 命令，具体参考：[child_process_exec](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

``` JS example
$exec('node -v', (error, stdout, stderr)=>console.log(stdout))
```

## 使用 nodejs module

在 JS 文件开头 **// @require** 声明， 然后直接调用

``` js example.js
// @require          axios

axios.get('https://github.com/elecV2/elecV2P').then(res=>console.log(res.data))
```

*@require 的库必须是已经在当前项目安装好的*